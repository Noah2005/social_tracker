---

# ğŸ“± Social Detox Tracker

**Social Detox** ist eine Cross-Platform-Anwendung, die dir hilft, deine Bildschirmzeit auf Social Media Apps (Instagram, TikTok, YouTube, Snapchat) zu reduzieren. Sammle Punkte fÃ¼r weniger Nutzung, verfolge deine Statistiken in Echtzeit und miss dich mit anderen Nutzern auf der globalen Bestenliste.

Das Projekt besteht aus einer **nativen Android App** (Datensammler & Dashboard) und einem **Web Dashboard** (Visualisierung & Verwaltung), die beide Ã¼ber ein gemeinsames **Supabase Backend** synchronisiert werden.

---

## ğŸš€ Features

* **ğŸ“Š Cross-Platform Tracking:** Die Android-App misst die Nutzung im Hintergrund. Daten sind sofort im Web und in der App sichtbar.
* **ğŸ† Globales Leaderboard:** Ein Gamification-System, das Nutzer mit geringer Bildschirmzeit belohnt.
* **ğŸ“ˆ Detaillierte Statistiken:** Balkendiagramme und WochenÃ¼bersichten.
* **ğŸ¨ Profil-Anpassung:** WÃ¤hle deinen Benutzernamen und eine Avatar-Farbe.
* **ğŸ”’ Sicher:** Authentifizierung und Datenschutz durch Supabase Row Level Security (RLS).
* **ğŸ”„ Auto-Sync:** Automatische Datensynchronisation und manueller Refresh.

---

## ğŸ›  Tech Stack

### Backend & Datenbank

* **Supabase:** PostgreSQL Datenbank, Authentication, Realtime Updates.

### Mobile App (Android)

* **Framework:** Flutter (Dart)
* **State Management:** `setState` (Clean Architecture Ansatz)
* **Pakete:** `usage_stats`, `supabase_flutter`, `flutter_dotenv`

### Web Dashboard

* **Framework:** React (Vite, TypeScript)
* **Styling:** Tailwind CSS
* **Charts:** Recharts
* **Icons:** Lucide React

---

## âš™ï¸ Installation & Setup

### 1. Supabase Backend einrichten

1. Erstelle ein Projekt auf [Supabase](https://supabase.com).
2. Gehe in den **SQL Editor** und fÃ¼hre folgenden Code aus, um die Tabellen und Sicherheitsregeln zu erstellen:

```sql
-- 1. Tabelle fÃ¼r Profile erstellen
CREATE TABLE public.profiles (
  id UUID REFERENCES auth.users NOT NULL PRIMARY KEY,
  username TEXT,
  avatar_url TEXT
);

-- 2. Tabelle fÃ¼r tÃ¤gliche Statistiken erstellen
CREATE TABLE public.daily_stats (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  user_id UUID REFERENCES auth.users NOT NULL,
  date DATE NOT NULL,
  instagram_min INT DEFAULT 0,
  tiktok_min INT DEFAULT 0,
  youtube_min INT DEFAULT 0,
  snapchat_min INT DEFAULT 0,
  daily_score INT DEFAULT 100,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- 3. Unique Constraint hinzufÃ¼gen (Ein Eintrag pro User pro Tag)
ALTER TABLE public.daily_stats 
ADD CONSTRAINT daily_stats_user_date_key UNIQUE (user_id, date);

-- 4. Row Level Security (RLS) aktivieren
ALTER TABLE public.profiles ENABLE ROW LEVEL SECURITY;
ALTER TABLE public.daily_stats ENABLE ROW LEVEL SECURITY;

-- 5. Policies erstellen (Jeder darf lesen, nur Owner darf schreiben)
-- Profile
CREATE POLICY "Profile sind Ã¶ffentlich" ON public.profiles FOR SELECT USING (true);
CREATE POLICY "Profile Ã¤ndern nur Owner" ON public.profiles FOR UPDATE USING (auth.uid() = id);
CREATE POLICY "Profile erstellen nur Owner" ON public.profiles FOR INSERT WITH CHECK (auth.uid() = id);

-- Stats
CREATE POLICY "Jeder darf Stats lesen" ON public.daily_stats FOR SELECT USING (true);
CREATE POLICY "Nur Owner darf Stats schreiben" ON public.daily_stats FOR ALL USING (auth.uid() = user_id);

-- 6. Trigger fÃ¼r neue User (Profil automatisch anlegen)
CREATE OR REPLACE FUNCTION public.handle_new_user() 
RETURNS TRIGGER AS $$
BEGIN
  INSERT INTO public.profiles (id, username, avatar_url)
  VALUES (new.id, new.raw_user_meta_data->>'username', '');
  RETURN new;
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;

CREATE TRIGGER on_auth_user_created
  AFTER INSERT ON auth.users
  FOR EACH ROW EXECUTE PROCEDURE public.handle_new_user();

```

---

### 2. Mobile App (Flutter)

1. Navigiere in den Ordner:
```bash
cd android_tracker_app

```


2. Erstelle eine Datei `.env` im Hauptverzeichnis der App:
```env
SUPABASE_URL=DEINE_SUPABASE_URL
SUPABASE_ANON_KEY=DEIN_SUPABASE_ANON_KEY

```


3. Installiere AbhÃ¤ngigkeiten:
```bash
flutter pub get

```


4. Starte die App (Stelle sicher, dass ein Emulator lÃ¤uft):
```bash
flutter run

```



**âš ï¸ WICHTIG:** Beim ersten Start auf einem Android-GerÃ¤t/Emulator musst du der App die Berechtigung **"Usage Access" (Nutzungsdatenzugriff)** in den Android-Einstellungen gewÃ¤hren, sonst werden alle Zeiten mit 0 min angezeigt.

---

### 3. Web Dashboard (React)

1. Navigiere in den Ordner:
```bash
cd web_dashboard

```


2. Erstelle eine Datei `.env` (oder `.env.local`) im Hauptverzeichnis:
```env
VITE_SUPABASE_URL=DEINE_SUPABASE_URL
VITE_SUPABASE_ANON_KEY=DEIN_SUPABASE_ANON_KEY

```


3. Installiere AbhÃ¤ngigkeiten:
```bash
npm install

```


4. Starte den Development Server:
```bash
npm run dev

```



---

## ğŸ“± Nutzung

1. **Registrierung:** Erstelle einen Account Ã¼ber die App oder das Web. WÃ¤hle dabei einen Benutzernamen.
2. **Tracking (App):** Ã–ffne die App. Sie liest automatisch deine Nutzungszeit von Instagram, TikTok & Co.
3. **Sync:** DrÃ¼cke in der App oben rechts auf den **Refresh-Button**, um die Daten an die Datenbank zu senden.
4. **Analyse (Web/App):** Sieh dir deine Statistiken im Dashboard an.
5. **Leaderboard:** Checke das Ranking, um zu sehen, wer am wenigsten Zeit am Handy verbracht hat.

---

## ğŸ“‚ Projektstruktur

```text
/
â”œâ”€â”€ android_tracker_app/   # Flutter Mobile App Code
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ main.dart
â”‚   â”‚   â”œâ”€â”€ screens/       # Login, Dashboard, Leaderboard, Settings
â”‚   â”‚   â””â”€â”€ services/      # Usage Stats Service logic
â”‚   â””â”€â”€ .env               # Secrets (nicht im Repo!)
â”‚
â”œâ”€â”€ web_dashboard/         # React Web App Code
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx        # Hauptlogik & Routing
â”‚   â”‚   â”œâ”€â”€ supabaseClient.ts
â”‚   â”‚   â””â”€â”€ Login.tsx
â”‚   â””â”€â”€ .env               # Secrets (nicht im Repo!)
â”‚
â””â”€â”€ README.md              # Dokumentation

```

---
